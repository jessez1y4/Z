.container
  .col-xs-3
    %ul.nav.nav-pills.nav-stacked
      %li#avatar-edit-tab
        %a{href: '#avatar-edit', 'data-toggle' => 'tab'}AVATAR
      %li#profile-edit-tab
        %a{href: '#profile-edit', 'data-toggle' => 'tab'}PROFILE
      %li#preference-edit-tab
        %a{href: '#preference-edit', 'data-toggle' => 'tab'}PREFERENCE
  .col-xs-9.tab-content{'data-tab' => @active_tab}
    #avatar-edit.tab-pane
      %h3
        AVATAR
      %hr
      .row
        .col-xs-2
          = cl_image_tag @user.avatar_cloudinary_id, width: 100, height: 100, crop: 'fill', gravity: 'face'
        .col-xs-10
          #step-1
            %button#upload-avatar-btn.btn.btn-default.btn-lg
              Upload from local
            %p
              Your avatar should be at least 100 x 100 pixels.
          #step-2.hidden
            %p
              Save the change?
            %button#save-avatar-btn.btn.btn-default.btn-lg
              Save
            = link_to 'Discard', edit_user_path, class: 'btn btn-danger btn-lg'

          .hidden
            = form_tag '/user', method: :put, id: 'edit-avatar-form' do
              = cl_image_upload_tag :cloudinary_data
              = submit_tag 'submit'

    #profile-edit.tab-pane
      %h3 PROFILE
      %hr

      = form_for @user, url: '/user', method: :put, html: {class: 'form-horizontal', id: 'edit-profile-form'} do |f|
        .form-group
          %label.col-xs-3.control-label Username
          .col-xs-7
            %p.form-control-static
              = @user.username
        .form-group
          %label.col-xs-3.control-label Email
          .col-xs-7
            = f.text_field :email, class: 'form-control', 'data-error' => field_err(@user, :email)
        .form-group
          %label.col-xs-3.control-label Full Name
          .col-xs-7
            = f.text_field :full_name, class: 'form-control', 'data-error' => field_err(@user, :full_name)
        .form-group
          %label.col-xs-3.control-label Description
          .col-xs-7
            = f.text_area :description, class: 'form-control', 'data-error' => field_err(@user, :description)
        .form-group
          .col-xs-7.col-xs-offset-3
            = f.submit 'Update my profile', class: 'btn btn-primary btn-lg'


    #preference-edit.tab-pane
      %h3 PREFERENCE
      %hr

